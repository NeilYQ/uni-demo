(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/music/music"],{"4da3":function(t,e,i){"use strict";var n=i("524e"),s=i.n(n);s.a},"524e":function(t,e,i){},"9af9":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("view",{staticClass:"music-pic"},[i("image",{attrs:{src:t.details.picUrl,"lazy-load":"true"}})]),i("view",{staticClass:"progress"},[i("view",{staticClass:"time currentTime"},[t._v(t._s(t.current))]),i("view",{staticClass:"oslider"},[i("slider",{attrs:{value:t.value,"block-size":"12",eventid:"901a2b98-0"},on:{changing:t.changing,change:t.change}})]),i("view",{staticClass:"time duration"},[t._v(t._s(t.duration))])]),i("view",{staticClass:"control"},[i("view",[i("image",{staticClass:"control-style",attrs:{src:t.styleList[t.styleMode].iconUrl,alt:t.styleList[t.styleMode].name,eventid:"901a2b98-1"},on:{click:function(e){e.stopPropagation(),t.setStyleMode()}}})]),i("view",[i("image",{staticClass:"control-pre",attrs:{src:"../../static/prev.png",eventid:"901a2b98-2"},on:{click:function(e){e.stopPropagation(),t.prev()}}})]),i("view",[i("image",{staticClass:"control-play",attrs:{src:"../../static/"+(t.paused?"paused":"play")+".png",eventid:"901a2b98-3"},on:{click:function(e){e.stopPropagation(),t.paused?t.play():t.pause()}}})]),i("view",[i("image",{staticClass:"control-pre",attrs:{src:"../../static/next.png",eventid:"901a2b98-4"},on:{click:function(e){e.stopPropagation(),t.next()}}})]),i("view",[i("image",{staticClass:"control-download",attrs:{src:"../../static/download.png",eventid:"901a2b98-5"},on:{click:function(e){e.stopPropagation(),t.download()}}})]),t._m(0)]),i("view",{staticClass:"music-lrc"},[i("ul",{style:"margin-top:-"+28*t.index+"px"},t._l(t.mlrc,function(e,n){return i("li",{key:n,class:t.index===n&&"on"},[t._v(t._s(e.text))])}))],1)])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("image",{staticClass:"control-menu",attrs:{src:"../../static/menu.png"}})])}];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return s})},"9f1b":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("2f62"));function s(t){return t&&t.__esModule?t:{default:t}}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){r(t,e,i[e])})}return t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c={computed:a({},n.default.mapState(["audio","details","paused","lrc","styleMode","styleList","musicIndex","history"])),data:function(){return{current:"00:00",duration:"00:00",updateState:!0,value:0,index:-1,mlrc:[]}},mounted:function(){var t=this;this.drawInit(),this.audio.onEnded(function(){t.drawInit(),t.setMusicIndex(1),t.setSrc(t.history[t.musicIndex].mp3Url),t.setDetail(t.history[t.musicIndex].detail),t.setLrc(t.history[t.musicIndex].lrc)}),this.audio.onPlay(this.drawInit),this.audio.onTimeUpdate(this.getCurrentTime)},methods:a({},n.default.mapMutations(["play","pause","setSrc","setDetail","setLrc","setStyleMode","setMusicIndex","prev"]),{drawInit:function(){this.index=-1,t.setNavigationBarTitle({title:this.details.name});var e=this.lrc.split("\n");e.forEach(function(t,i){var n=t.split("]");e[i]={time:n[0].substring(1,n[0].length-1),text:n[1]}}),this.mlrc=e},timeToString:function(t){var e=parseInt(t/60),i=parseInt(t%60);return"".concat(e<10?"0"+e:e,":").concat(i<10?"0"+i:i)},getCurrentTime:function(){this.current=this.timeToString(this.audio.currentTime||0),this.duration=this.timeToString(this.audio.duration||0),this.updateState&&(this.value=this.audio.currentTime/this.audio.duration*100),this.index<this.mlrc.length-1&&(this.mlrc[this.index+1].time<this.current||/[a-z]+/i.test(this.mlrc[this.index+1].time))&&this.index++},change:function(t){var e=t.detail.value/100*this.audio.duration;this.audio.seek(e),this.updateState=!0;var i=this,n=this.timeToString(e);this.index=0,function t(){i.index<i.mlrc.length-1&&(i.mlrc[i.index+1].time<n||/[a-z]+/i.test(i.mlrc[i.index+1].time))&&(i.index++,t())}()},changing:function(){this.updateState=!1},prev:function(){this.setMusicIndex(-1),this.setSrc(this.history[this.musicIndex].mp3Url),this.setDetail(this.history[this.musicIndex].detail),this.setLrc(this.history[this.musicIndex].lrc)},next:function(){this.setMusicIndex(1),this.setSrc(this.history[this.musicIndex].mp3Url),this.setDetail(this.history[this.musicIndex].detail),this.setLrc(this.history[this.musicIndex].lrc)},download:function(){t.downloadFile({url:this.audio.src,success:function(e){console.log(e),t.saveFile({tempFilePath:e.tempFilePath})}})}})};e.default=c}).call(this,i("6e42")["default"])},c504:function(t,e,i){"use strict";i("2799");var n=a(i("b0ce")),s=a(i("e4ba"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(s.default))},e4ba:function(t,e,i){"use strict";i.r(e);var n=i("9af9"),s=i("f0ac");for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);i("4da3");var r=i("2877"),c=Object(r["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=c.exports},f0ac:function(t,e,i){"use strict";i.r(e);var n=i("9f1b"),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=s.a}},[["c504","common/runtime","common/vendor"]]]);